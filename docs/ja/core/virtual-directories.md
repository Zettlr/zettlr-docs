# 仮想ディレクトリ

仮想ディレクトリはファイルを任意に並べたり集めたりできる、Zettlrの強力な機能です。これは、ファイルを手動で入れられる箱のようなものとして機能します。

## 仮想ディレクトリを作る

仮想ディレクトリは特定のディレクトリのサブセットに相当するものです。作成するには、任意のディレクトリを右クリックして「新規仮想ディレクトリ...」を選択します。それから、他のディレクトリと同じように名前を付けます。仮想ディレクトリの名前も普通のディレクトリと同じルールに従い、一貫性を持った名前を付けます。加えて、その名前は[JSON](https://ja.wikipedia.org/wiki/JSON)-safeである必要があります。

仮想ディレクトリは、作成時に選択したディレクトリのサブディレクトリのように表示されます。他のすべてのサブディレクトリより上に表示されるので簡単に見つけることができます。また、小さな箱のアイコンが付き、他のディレクトリとは異なる色で表示されます。

## ファイルの追加、削除、編集

作成した仮想ディレクトリは、普通のディレクトリとほぼ同様に動作します。ファイルをドロップして追加したり、名前を変更したり、削除することができます。しかし、特筆すべき制限事項が一点あります。

> 仮想ディレクトリを作ったディレクトリの**内部**にあるファイルのみ追加することができます。仮想ディレクトリは、あるディレクトリのサブセットを表すものなので、そのディレクトリの**外部**にあるファイルを追加することはできません。

ファイルを削除するには、仮想ディレクトリ内のファイルを右クリックし「ファイルを削除」を選択します。(つまり、ファイルそのものではなく紫色で表示されているものを右クリックします。)

仮想ディレクトリ内では、すべてのファイル操作が許可されています。ファイルを他のディレクトリに移動することさえできます。仮想ディレクトリ内のファイルをリネームすれば、ディスク上の本当のディレクトリと仮想ディレクトリの両方に反映されます。ファイルの実体を削除すると、すべての仮想ディレクトリ上からも削除されます。

## 仮想ディレクトリのその他の制限事項

ファイルが実際に属しているディレクトリの外部に保持することができないということに加えて、仮想ディレクトリにはいくつかの追加の制限事項があります。

1. 仮想ディレクトリは作成されたディレクトリに結びついているので、移動することはできません。
2. 仮想ディレクトリは永続的なものですが、もちろんディレクトリの一種ではありません。これらは、[ドットファイル](https://en.wikipedia.org/wiki/Hidden_file_and_hidden_directory)と呼ばれるものであり、いくつかの問題を抱えています。
  1. まず、Windowsでは、常に`.ztr-virtual-directory`というファイルが見えてしまいます。これは、Windowsが他のOSのようにドットファイルを隠そうとしないからです。
  2. 次に、多くのクラウドサービスでは、セキュリティ上の理由からドットファイルを同期しません。(例えばNextcloudでは、ドットファイルを同期するようにクライアントに指定する必要があります。)つまり、クラウドサービスを使って複数のデバイスからファイルにアクセスする場合、仮想ディレクトリは転送されない可能性があります。
